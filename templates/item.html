{% extends "base.html" %} {% block title %}{{ item.title }} · {{ BRAND }}{%
endblock %} {% block content %}

<div class="row g-4">
  <div class="col-lg-5">
    <img
      class="item-img"
      src="https://picsum.photos/seed/item-{{ item.id }}/900/600"
      alt="{{ item.title }}"
      data-fallback="{{ url_for('static', filename='placeholder.jpg') }}"
      onerror="this.onerror=null; this.src=this.dataset.fallback;"
    />
  </div>
  <div class="col-lg-7">
    <h3 class="mb-1">{{ item.title }}</h3>
    <div class="small text-secondary mb-3">
      {{ item.class_name }} · {{ item.department_name }}
    </div>
    <p class="lead">{{ item.description }}</p>

    <a
      class="btn btn-primary"
      href="{{ url_for('new_review', item_id=item.id) }}"
    >
      Write a review
    </a>
  </div>
</div>

<hr class="my-5" />

<h5 class="mb-3">Reviews</h5>
{% for r in reviews %}
<div class="card mb-3 p-3">
  <div class="d-flex justify-content-between align-items-center">
    <div class="small"><strong>Rating:</strong> {{ r.rating }}/5</div>
    <span
      class="badge {{ 'bg-success' if r.recommend_label==1 else 'bg-secondary' }}"
    >
      {{ 'Recommended' if r.recommend_label==1 else 'Not recommended' }}
    </span>
  </div>
  {% if r.title %}
  <div class="mt-2"><strong>{{ r.title }}</strong></div>
  {% endif %}
  <div class="mt-1">{{ r.body }}</div>
  <div class="small text-secondary mt-2">
    Model suggested: {{ r.model_suggested }}
  </div>
  <a
    class="btn btn-link btn-sm px-0"
    href="{{ url_for('review_detail', review_id=r.id) }}"
    >See Review</a
  >
</div>
{% else %}
<div class="text-secondary">No reviews yet — be the first!</div>
{% endfor %} {% endblock %}
